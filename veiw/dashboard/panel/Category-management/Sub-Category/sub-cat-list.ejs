<%- include('../../../components/header.ejs') %>
  <%- include('../../../components/sidebar.ejs') %>
    <div class="d-sm-flex text-center justify-content-between align-items-center mb-4">
      <h3 class="mb-sm-0 mb-1 fs-18">Category Management</h3>
      <ul class="ps-0 mb-0 list-unstyled d-flex justify-content-center">
        <li>
          <a href="/dashboard" class="text-decoration-none">
            <i class="ri-home-2-line" style="position: relative; top: -1px;"></i>
            <span>Home</span>
          </a>
        </li>
        <li>
          <span class="fw-semibold fs-14 heading-font text-dark dot ms-2">Sub Category List</span>
        </li>
      </ul>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-12">
        <div class="card bg-white border-0 rounded-10 mb-4">
          <div class="card-body p-4">
            <div class="tab-content" id="myTabContent">
              <div class="tab-pane fade show active" id="preview-tab-pane" role="tabpanel" aria-labelledby="preview-tab"
                tabindex="0">
                <div class="d-sm-flex text-center justify-content-between align-items-center border-bottom pb-20 mb-20">
                  <h4 class="fw-semibold fs-18 mb-sm-0">Sub Category List</h4>
                  <a class="border-0 btn btn-primary py-2 px-3 px-sm-4 text-white fs-14 fw-semibold rounded-3"
                    href="/subcategorylist/createsubcategory">
                    <span class="py-sm-1 d-block">
                      <i class="ri-add-line text-white"></i>
                      <span>Add Category</span>
                    </span>
                  </a>
                </div>
                <div class="default-table-area members-list">
                  <div class="table-responsive">
                    <table class="table align-middle">
                      <thead>
                        <tr class="text-center">
                          <th scope="col">SN. NO.</th>
                          <th scope="col">Category Image</th>
                          <th scope="col">Category Main Name</th>
                          <th scope="col">Category Sub Name</th>
                          <th scope="col">Category Icon</th>
                          <th scope="col">Create Date</th>
                          <th scope="col">Status</th>
                          <th scope="col">Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        <%if(data && maincatdata){%>
                          <% data.forEach((sub, i)=> { %>
                            <% maincatdata.forEach((main, index)=> { %>
                              <% if(sub.main_cat_token==main.cat_main_token) { %>
                                <tr class="text-center">
                                  <td class="text-xl-start">
                                    <%= i=i+1 %>
                                  </td>
                                  <td>
                                    <img
                                      src="/Storage/category-management/sub-category/<%= sub.sub_cat_token %>/<%= sub.image%>"
                                      alt="" width="50px">
                                  </td>

                                  <td>

                                    <%= main.cat_name %>
                                  </td>

                                  <td>
                                    <%= sub.sub_cat_name %>
                                  </td>

                                  <td>
                                    <i class="<%= sub.icon %>"></i>
                                  </td>

                                  <td>
                                    <%= sub.create_date %>
                                  </td>
                                  <td>
                                    <% if(sub.publish_status==1){ %>
                                      <form method="post" action="/subcategorylist/subcatunpublished">
                                        <input type="hidden" name="sub_cat_token" value="<%= sub.sub_cat_token %>">
                                        <button class="btn btn-sm btn-success"
                                          style="display: block; margin: 0px auto; padding: 5px 10px !important;"
                                          type="submit">
                                          <i class="fa fa-toggle-on text-white"></i>
                                        </button>
                                      </form>
                                      <%}else {%>
                                        <form method="post" action="/subcategorylist/subcatpublished">
                                          <input type="hidden" name="sub_cat_token" value="<%= sub.sub_cat_token%>">
                                          <button class="btn btn-sm btn-danger"
                                            style="display: block; margin: 0px auto; padding: 3px 10px !important;"
                                            type="submit">
                                            <i class="fa fa-toggle-off text-white"></i>
                                          </button>
                                        </form>
                                        <%}%>
                                  </td>
                                  <td>
                                    <div class="d-flex" style="justify-content: center;">
                                      <button type="button" class="btn btn btn-danger py-2 px-4 text-white fw-semibold"
                                        data-bs-toggle="modal" data-bs-target="#exampleModal4<%= sub.sub_cat_token %>"
                                        style="display: block; margin-right: 5px; padding: 3px 10px !important;">
                                        <i class="fa fa-trash"></i>
                                      </button>

                                      <!-- Modal -->
                                      <div class="modal fade" id="exampleModal4<%= sub.sub_cat_token %>" tabindex="-1"
                                        aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                          <div class="modal-content">
                                            <div class="modal-header">
                                              <h1 class="modal-title fs-5" id="exampleModalLabel">Category Delete
                                              </h1>
                                              <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                              Yes, Do you want to delete category
                                            </div>
                                            <div class="modal-footer">
                                              <button type="button" class="btn btn-danger text-white"
                                                data-bs-dismiss="modal">Close</button>
                                              <a class="btn btn-primary text-white"
                                                href="/subcategorylist/deleteCategory?sub_cat_token=<%= sub.sub_cat_token%>">Delete
                                                Now</a>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <a type="button" class="btn btn btn-success py-2 px-4 text-white fw-semibold"
                                        href="/subcategorylist/viewCategoryDetails?sub_cat_token=<%= sub.sub_cat_token%>"
                                        style="display: block; margin-right: 5px; padding: 3px 10px !important;">
                                        <i class="fa fa-eye"></i>
                                      </a>
                                    </div>
                                  </td>
                                </tr>
                                <%} })%>
                                  <% }) } %>

                      </tbody>
                    </table>
                  </div>
                  <div class="d-sm-flex justify-content-between align-items-center text-center">
                    <span class="fs-14">Showing 1 To 6 Of 20 Entries</span>
                    <nav aria-label="Page navigation example">
                      <ul class="pagination mb-0 mt-3 mt-sm-0 justify-content-center">
                        <li class="page-item">
                          <a class="page-link icon" href="members-list.html" aria-label="Previous">
                            <i data-feather="arrow-left"></i>
                          </a>
                        </li>
                        <li class="page-item"><a class="page-link active" href="members-list.html">1</a></li>
                        <li class="page-item"><a class="page-link" href="members-list.html">2</a></li>
                        <li class="page-item"><a class="page-link" href="members-list.html">3</a></li>
                        <li class="page-item">
                          <a class="page-link icon" href="members-list.html" aria-label="Next">
                            <i data-feather="arrow-right"></i>
                          </a>
                        </li>
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%- include('../../../components/footer.ejs') %>